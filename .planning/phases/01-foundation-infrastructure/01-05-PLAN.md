---
phase: 01-foundation-infrastructure
plan: 05
type: execute
wave: 5
depends_on: ["01-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "First visitor can create admin account and access admin dashboard"
    - "Admin can invite users via email with cryptographically secure tokens"
    - "Invited user can register via link and log in with credentials"
    - "User session persists across browser refresh and reconnects after network interruption"
    - "Admin can ban and unban users"
    - "All UI labels and messages display in German"
    - "Interface is responsive and usable on mobile devices"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Phase 1 foundation by testing all success criteria end-to-end. This is a human verification checkpoint to confirm everything works together before moving to Phase 2.

Purpose: Phase 1 is the foundation for everything. Catching issues now is far cheaper than discovering broken auth or WebSocket infrastructure in Phase 2.
Output: Confirmed working foundation OR list of issues to address.
</objective>

<execution_context>
@C:\Users\maxi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\maxi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-infrastructure/01-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 1 foundation: invite-based auth system, admin dashboard, WebSocket infrastructure, responsive German UI with dark theme and green accent</what-built>
  <how-to-verify>
    Start the dev server: `node server.js` (ensure PostgreSQL is running and DATABASE_URL is set)

    **1. Admin Setup Flow (AUTH-01)**
    - Open http://localhost:3000 in browser (should redirect to /setup)
    - Fill in admin account: username, email, password, display name
    - Submit — should redirect to the app with sidebar visible
    - Verify you see the lobby placeholder ("Spiele kommen bald")

    **2. Admin Dashboard (AUTH-06)**
    - Click "Administration" in the sidebar
    - Verify stats cards show: 1 user, 0 pending invites
    - Verify user table shows your admin account with "ADMIN" badge

    **3. Invite User (AUTH-02)**
    - Click "Nutzer einladen"
    - Enter a test email address
    - Click "Link generieren" — copy the generated link
    - (Optional) If Resend is configured: try "Per E-Mail senden" and check inbox

    **4. Registration via Invite (AUTH-03)**
    - Open a new private/incognito browser window
    - Paste the invite link
    - Verify the registration form shows with pre-filled email (read-only)
    - Fill in username, password, display name
    - Submit — should redirect to the app

    **5. Login Flow (AUTH-04)**
    - Log out from the second account
    - Visit /login
    - Enter the credentials you just created
    - Submit — should redirect to the app
    - Try wrong password — should show German error toast

    **6. Session Persistence (AUTH-05)**
    - While logged in, refresh the browser (F5)
    - Verify you're still logged in (not redirected to /login)
    - Verify the sidebar and lobby page still show

    **7. WebSocket Connection (ECHT-01, ECHT-02)**
    - Check the connection status indicator in the sidebar — should show green "Verbunden"
    - Open browser DevTools Network tab, filter by WS
    - Verify a WebSocket connection exists
    - Disable network (DevTools -> Network -> Offline) — indicator should change to red "Getrennt"
    - Re-enable network — should auto-reconnect (green indicator returns within a few seconds)

    **8. Ban/Unban (AUTH-06)**
    - Switch to admin account (first browser)
    - Go to admin dashboard
    - Ban the test user (click ban, optionally enter reason)
    - Verify user shows "Gesperrt" badge in table
    - Switch to test user (second browser) — refresh page
    - Verify test user is logged out / redirected to login
    - Try logging in as banned user — should show "Account gesperrt" error
    - Back in admin: unban the user
    - Try logging in again — should succeed

    **9. German UI (UI-01)**
    - Navigate through all pages: setup, login, register, lobby, admin
    - Verify ALL text is in German (no English labels, buttons, or messages)

    **10. Mobile Responsive (UI-02)**
    - Resize browser to mobile width (~375px) or use DevTools responsive mode
    - Verify sidebar collapses to hamburger menu
    - Tap hamburger — sidebar slides in
    - Navigate via mobile sidebar
    - Verify admin dashboard is usable on mobile (cards stack, table scrolls)
    - Verify auth pages (login, register) look good on mobile
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All seven Phase 1 success criteria verified:
1. First visitor can create admin account and access admin dashboard
2. Admin can invite users via email with cryptographically secure tokens
3. Invited user can register via link and log in with credentials
4. User session persists across browser refresh and reconnects after network interruption
5. Admin can ban and unban users
6. All UI labels and messages display in German
7. Interface is responsive and usable on mobile devices
</verification>

<success_criteria>
Human confirms all 10 verification steps pass. Phase 1 foundation is solid and ready for Phase 2 (game engine).
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-05-SUMMARY.md`
</output>
